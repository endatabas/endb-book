<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>HTTP API - The Endatabas Book</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Introduction</a></li><li class="chapter-item expanded "><a href="../tutorial/index.html"><strong aria-hidden="true">1.</strong> Tutorial</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tutorial/quickstart.html"><strong aria-hidden="true">1.1.</strong> Quickstart</a></li><li class="chapter-item expanded "><a href="../tutorial/try_it.html"><strong aria-hidden="true">1.2.</strong> Try It!</a></li><li class="chapter-item expanded "><a href="../tutorial/sql_basics.html"><strong aria-hidden="true">1.3.</strong> Endb SQL Basics</a></li></ol></li><li class="chapter-item expanded "><a href="../sql/index.html"><strong aria-hidden="true">2.</strong> SQL Reference</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../sql/intention.html"><strong aria-hidden="true">2.1.</strong> Intention</a></li><li class="chapter-item expanded "><a href="../sql/data_manipulation.html"><strong aria-hidden="true">2.2.</strong> Data Manipulation</a></li><li class="chapter-item expanded "><a href="../sql/queries.html"><strong aria-hidden="true">2.3.</strong> Queries</a></li><li class="chapter-item expanded "><a href="../sql/data_types.html"><strong aria-hidden="true">2.4.</strong> SQL Data Types</a></li><li class="chapter-item expanded "><a href="../sql/operators.html"><strong aria-hidden="true">2.5.</strong> Operators</a></li><li class="chapter-item expanded "><a href="../sql/functions.html"><strong aria-hidden="true">2.6.</strong> Functions</a></li><li class="chapter-item expanded "><a href="../sql/time_queries.html"><strong aria-hidden="true">2.7.</strong> Time Queries</a></li><li class="chapter-item expanded "><a href="../sql/path_navigation.html"><strong aria-hidden="true">2.8.</strong> Path Navigation</a></li><li class="chapter-item expanded "><a href="../sql/schema.html"><strong aria-hidden="true">2.9.</strong> Schema</a></li><li class="chapter-item expanded "><a href="../sql/views.html"><strong aria-hidden="true">2.10.</strong> Views</a></li><li class="chapter-item expanded "><a href="../sql/assertions.html"><strong aria-hidden="true">2.11.</strong> Assertions</a></li></ol></li><li class="chapter-item expanded "><a href="../reference/index.html"><strong aria-hidden="true">3.</strong> Reference</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../reference/installation.html"><strong aria-hidden="true">3.1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="../reference/operation.html"><strong aria-hidden="true">3.2.</strong> Operation</a></li><li class="chapter-item expanded "><a href="../reference/monitoring.html"><strong aria-hidden="true">3.3.</strong> Monitoring</a></li><li class="chapter-item expanded "><a href="../reference/http_api.html" class="active"><strong aria-hidden="true">3.4.</strong> HTTP API</a></li><li class="chapter-item expanded "><a href="../reference/websocket_api.html"><strong aria-hidden="true">3.5.</strong> WebSocket API</a></li><li class="chapter-item expanded "><a href="../reference/data_types.html"><strong aria-hidden="true">3.6.</strong> Data Types</a></li></ol></li><li class="chapter-item expanded "><a href="../appendix/index.html"><strong aria-hidden="true">4.</strong> Appendix</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../appendix/what.html"><strong aria-hidden="true">4.1.</strong> What?</a></li><li class="chapter-item expanded "><a href="../appendix/why.html"><strong aria-hidden="true">4.2.</strong> Why?</a></li><li class="chapter-item expanded "><a href="../appendix/architecture.html"><strong aria-hidden="true">4.3.</strong> Architecture</a></li><li class="chapter-item expanded "><a href="../appendix/roadmap.html"><strong aria-hidden="true">4.4.</strong> Roadmap</a></li><li class="chapter-item expanded "><a href="../appendix/license.html"><strong aria-hidden="true">4.5.</strong> License</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Endatabas Book</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/endatabas/endb-book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/endatabas/endb-book/edit/main/src/reference/http_api.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="http-api"><a class="header" href="#http-api">HTTP API</a></h1>
<p>If a <a href="https://github.com/endatabas/endb/tree/main/clients">client</a> is
not available for your programming language yet, your app can interact
directly with the Endb HTTP API.
Any HTTP client may be used but in the examples below we'll use <code>curl</code>
to demonstrate the API without writing any code.</p>
<p>You can send SQL statements to <code>endb</code> over HTTP:</p>
<pre><code class="language-sh">curl -d &quot;INSERT INTO users (name) VALUES ('Tianyu')&quot; -H &quot;Content-Type: application/sql&quot; -X POST http://localhost:3803/sql
curl -d &quot;SELECT * FROM users&quot; -H &quot;Content-Type: application/sql&quot; -X POST http://localhost:3803/sql
</code></pre>
<p>You can send SQL to <code>endb</code> with standard HTTP Query Parameters, Verbs,
Content Types, Accept Headers, and HTTP Basic Authentication.
Each one is outlined below.</p>
<h2 id="http-query-parameters"><a class="header" href="#http-query-parameters">HTTP Query Parameters</a></h2>
<p>The query parameters Endb's HTTP endpoint accepts are:</p>
<ul>
<li><code>q</code> - (q)uery: a SQL query, optionally parameterized</li>
<li><code>p</code> - (p)arameters: named or positional <a href="http_api.html#parameters">parameters</a></li>
<li><code>m</code> - (m)any parameter lists: <a href="http_api.html#bulk-parameters">bulk parameters</a>, used for bulk insert/update</li>
</ul>
<h2 id="http-verbs"><a class="header" href="#http-verbs">HTTP Verbs</a></h2>
<p><code>POST</code> allows explicit Content Types and Accept headers:</p>
<pre><code class="language-sh">curl -d 'SELECT 1' -H &quot;Content-Type: application/sql&quot; -H &quot;Accept: text/csv&quot; -X POST http://localhost:3803/sql
</code></pre>
<p><code>GET</code> allows a single, simple URL.
<code>GET</code> does not permit DML.</p>
<pre><code class="language-sh">curl -X GET &quot;http://localhost:3803/sql?q=SELECT%201&quot;
</code></pre>
<h2 id="content-types"><a class="header" href="#content-types">Content Types</a></h2>
<p>The HTTP <code>Content-Type</code> header is used to specify what
format the client is sending data to Endb.</p>
<h3 id="applicationjson"><a class="header" href="#applicationjson"><code>application/json</code>:</a></h3>
<pre><code class="language-sh">curl -d '{&quot;q&quot;: &quot;SELECT * from products;&quot;}' -H &quot;Content-Type: application/json&quot; -X POST http://localhost:3803/sql
curl -d '{&quot;q&quot;: &quot;SELECT * from products WHERE name = ?;&quot;, &quot;p&quot;: [&quot;Salt&quot;]}' -H &quot;Content-Type: application/json&quot; -X POST http://localhost:3803/sql
curl -d '{&quot;q&quot;: &quot;INSERT INTO products {name: :name};&quot;, &quot;p&quot;: {&quot;name&quot;: &quot;Paprika&quot;}}' -H &quot;Content-Type: application/json&quot; -X POST http://localhost:3803/sql
</code></pre>
<p>NOTE: To enable strongly-typed values, payloads sent with
the <code>application/json</code> content type have values resolved with JSON-LD scalars.
Standard JSON values are a subset of JSON-LD scalars, so data sent as regular
JSON is unaffected by this behaviour.</p>
<h3 id="applicationldjson"><a class="header" href="#applicationldjson"><code>application/ld+json</code></a></h3>
<p>Although values in the <code>application/json</code> content type are resolved using
JSON-LD scalars, you can explicitly specify an <code>application/ld+json</code>
content type to avoid all ambiguity.
See <a href="https://json-ld.org/">JSON-LD</a>.</p>
<pre><code class="language-sh">curl -d '{&quot;q&quot;: &quot;INSERT INTO events {start: :start};&quot;, &quot;p&quot;: {&quot;start&quot;: {&quot;@type&quot;: &quot;xsd:dateTime&quot;, &quot;@value&quot;: &quot;2011-04-09T20:00:00Z&quot;}}}' -H &quot;Content-Type: application/ld+json&quot; -X POST http://localhost:3803/sql
</code></pre>
<h3 id="applicationsql"><a class="header" href="#applicationsql"><code>application/sql</code>:</a></h3>
<pre><code class="language-sh">curl -d 'SELECT 1' -H &quot;Content-Type: application/sql&quot; -X POST http://localhost:3803/sql
</code></pre>
<p>Submit parameters to <code>application/sql</code> by providing form data or query parameters.
Form data and query parameters can be combined, though it is not necessarily recommended.</p>
<pre><code class="language-sql">curl -F q=&quot;INSERT INTO sauces {name: ?, color: ?};&quot; -X POST http://localhost:3803/sql?p=%5B%22ketchup%22%2C%22purple%22%5D
</code></pre>
<h3 id="multipartform-data"><a class="header" href="#multipartform-data"><code>multipart/form-data</code></a></h3>
<pre><code class="language-sh">curl -F q=&quot;SELECT * from products;&quot; -H &quot;Content-Type: multipart/form-data&quot; -X POST http://localhost:3803/sql
curl -F q=&quot;INSERT INTO products {name: ?};&quot; -F p='[&quot;Sriracha&quot;]' -X POST http://localhost:3803/sql
</code></pre>
<p>NOTE: Many HTTP clients (including <code>curl</code>) automatically assume a content type of
<code>multipart/form-data</code> when form fields are provided.
This is true for <code>curl</code> when the <code>-F</code> (<code>--form</code>) argument is used and it has
been elided from further examples.</p>
<h3 id="applicationx-www-form-urlencoded"><a class="header" href="#applicationx-www-form-urlencoded"><code>application/x-www-form-urlencoded</code></a></h3>
<p>Although the other content types are preferable for obvious reasons,
<code>application/x-www-form-urlencoded</code> is offered for completeness.</p>
<pre><code class="language-sh">curl -d 'q=SELECT%20*%20FROM%20products;' -H &quot;Content-Type: application/x-www-form-urlencoded&quot; -X POST http://localhost:3803/sql
</code></pre>
<h2 id="accept-headers"><a class="header" href="#accept-headers">Accept Headers</a></h2>
<p>The HTTP <code>Accept</code> header is used to specify how data is returned to
the Endb client.
The default <code>Accept</code> header content type is <code>application/json</code>.</p>
<h3 id="textcsv"><a class="header" href="#textcsv">text/csv</a></h3>
<p><code>text/csv</code> returns comma-separated rows.
Column order from the <code>SELECT</code> clause is maintained.</p>
<pre><code class="language-sh">curl -d &quot;SELECT * FROM (VALUES (1,'hello'), (2,'csv')) t1&quot; -H &quot;Content-Type: application/sql&quot; -H &quot;Accept: text/csv&quot; -X POST http://localhost:3803/sql
</code></pre>
<p>returns:</p>
<pre><code>&quot;column1&quot;,&quot;column2&quot;
2,&quot;csv&quot;
1,&quot;hello&quot;
</code></pre>
<h3 id="applicationjson-1"><a class="header" href="#applicationjson-1">application/json</a></h3>
<p><code>application/json</code> returns rows as an array of JSON tuples.
Column order from the <code>SELECT</code> clause is maintained.</p>
<pre><code class="language-sh">curl -d &quot;SELECT * FROM (VALUES (1,'hello'), (2,DATE('2023-07-22'))) t1&quot; -H &quot;Content-Type: application/sql&quot; -H &quot;Accept: application/json&quot; -X POST http://localhost:3803/sql
</code></pre>
<p>returns:</p>
<pre><code>[[2,&quot;2023-07-22&quot;],[1,&quot;hello&quot;]]
</code></pre>
<h3 id="applicationx-ndjson"><a class="header" href="#applicationx-ndjson">application/x-ndjson</a></h3>
<p><code>application/x-ndjson</code> returns newline-delimited JSON documents.
Column order from the <code>SELECT</code> clause is <em>not</em> maintained.
JSON documents cannot guarantee column order.</p>
<pre><code class="language-sh">curl -d &quot;SELECT * FROM (VALUES (1,'hello'), (2,DATE('2023-07-22'))) t1&quot; -H &quot;Content-Type: application/sql&quot; -H &quot;Accept: application/x-ndjson&quot; -X POST http://localhost:3803/sql
</code></pre>
<p>returns:</p>
<pre><code class="language-json">{&quot;column1&quot;:2,&quot;column2&quot;:&quot;2023-07-22&quot;}
{&quot;column1&quot;:1,&quot;column2&quot;:&quot;hello&quot;}
</code></pre>
<h3 id="applicationldjson-1"><a class="header" href="#applicationldjson-1">application/ld+json</a></h3>
<p><code>application/ld+json</code> returns documents of strongly-typed (&quot;Linking Data&quot;) JSON records.
Column order from the <code>SELECT</code> clause is <em>not</em> maintained.
JSON documents cannot guarantee column order.</p>
<pre><code class="language-sh">curl -d &quot;SELECT * FROM (VALUES (1,'hello'), (2,DATE('2023-07-22'))) t1&quot; -H &quot;Content-Type: application/sql&quot; -H &quot;Accept: application/ld+json&quot; -X POST http://localhost:3803/sql
</code></pre>
<p>returns:</p>
<pre><code class="language-json">{&quot;@context&quot;:{&quot;xsd&quot;:&quot;http://www.w3.org/2001/XMLSchema#&quot;,&quot;@vocab&quot;:&quot;http://endb.io/&quot;},&quot;@graph&quot;:[{&quot;column1&quot;:2,&quot;column2&quot;:{&quot;@value&quot;:&quot;2023-07-22&quot;,&quot;@type&quot;:&quot;xsd:date&quot;}},{&quot;column1&quot;:1,&quot;column2&quot;:&quot;hello&quot;}]}
</code></pre>
<p>See <a href="https://json-ld.org/">JSON-LD</a>.</p>
<h3 id="multipartmixed"><a class="header" href="#multipartmixed">multipart/mixed</a></h3>
<p><code>multipart/mixed</code> returns documents as a valid <code>multipart/mixed</code> response,
albeit all as LD-JSON.
This Accept Header exists for compatibility with browsers.</p>
<pre><code class="language-sh">curl -d &quot;SELECT * FROM (VALUES (1,'hello'), (2,DATE('2023-07-22'))) t1&quot; -H &quot;Content-Type: application/sql&quot; -H &quot;Accept: multipart/mixed&quot; -X POST http://localhost:3803/sql
</code></pre>
<p>returns:</p>
<pre><code>--369d7885-c6e9-4b01-93c9-9449a5fcd637
Content-Type: application/ld+json

{&quot;@context&quot;:{&quot;xsd&quot;:&quot;http://www.w3.org/2001/XMLSchema#&quot;,&quot;@vocab&quot;:&quot;http://endb.io/&quot;},&quot;@graph&quot;:[{&quot;column1&quot;:2,&quot;column2&quot;:{&quot;@value&quot;:&quot;2023-07-22&quot;,&quot;@type&quot;:&quot;xsd:date&quot;}},{&quot;column1&quot;:1,&quot;column2&quot;:&quot;hello&quot;}]}

--369d7885-c6e9-4b01-93c9-9449a5fcd637--
</code></pre>
<h3 id="applicationvndapachearrowfile"><a class="header" href="#applicationvndapachearrowfile">application/vnd.apache.arrow.file</a></h3>
<p><code>application/vnd.apache.arrow.file</code> returns columnar data as an Apache Arrow file.</p>
<pre><code class="language-sh">curl -d &quot;SELECT * FROM (VALUES (1,'hello'), (2,DATE('2023-07-22'))) t1&quot; -H &quot;Content-Type: application/sql&quot; -H &quot;Accept: application/vnd.apache.arrow.file&quot; -X POST http://localhost:3803/sql --output hello.arrow
</code></pre>
<p>The above command returns a file containing a single <code>RecordBatch</code> in an Apache Arrow file in IPC format.
You can examine the file with functions like
<a href="https://arrow.apache.org/docs/python/ipc.html#writing-and-reading-random-access-files"><code>pyarrow.ipc.open_file</code></a>,
as seen in <a href="https://gist.github.com/deobald/a65ca0f57d66041bf66d41d0509a981f">this gist</a>.</p>
<h3 id="applicationvndapachearrowstream"><a class="header" href="#applicationvndapachearrowstream">application/vnd.apache.arrow.stream</a></h3>
<p><code>application/vnd.apache.arrow.stream</code> returns columnar data as an Apache Arrow stream.</p>
<pre><code class="language-sh">curl -d &quot;SELECT * FROM (VALUES (1,'hello'), (2,DATE('2023-07-22'))) t1&quot; -H &quot;Content-Type: application/sql&quot; -H &quot;Accept: application/vnd.apache.arrow.stream&quot; -X POST http://localhost:3803/sql --output streamed.arrows
</code></pre>
<p>The above command returns a file containing an Apache Arrow IPC stream.
You can examine the file with functions like
<a href="https://arrow.apache.org/docs/python/ipc.html#using-streams"><code>pyarrow.ipc.open_stream</code></a>,
as seen in <a href="https://gist.github.com/deobald/1eeca3a08ca1490f49bb67a0fa31994b">this gist</a>.</p>
<h2 id="http-basic-authentication"><a class="header" href="#http-basic-authentication">HTTP Basic Authentication</a></h2>
<p>Endb supports HTTP Basic Authentication as defined by
<a href="https://datatracker.ietf.org/doc/html/rfc7235">RFC 7235</a>.
Pass <code>--username</code> and <code>--password</code> arguments to the <code>endb</code> binary to force
basic authentication for HTTP connections.
(See <a href="operation.html">Operation</a> for more details, including environment variables
which can be passed to Docker images.)</p>
<pre><code class="language-sh">./target/endb --username zig --password zag
</code></pre>
<p>Then, from any HTTP client, provide the username and password combination to
execute queries.</p>
<pre><code class="language-sh">curl --user zig:zag -d &quot;SELECT 'Hello World';&quot; -H &quot;Content-Type: application/sql&quot; -X POST http://localhost:3803/sql
</code></pre>
<p>If the client passes an incorrect username or password, it will receive a
<code>401 Authorization Required</code> HTTP status code as a result, but no body.
Be aware of this to ensure client code is written to detect 401 status codes.</p>
<pre><code class="language-sh">$ curl -i --user zig:wrong -d &quot;SELECT 'Hello World';&quot; -H &quot;Content-Type: application/sql&quot; -X POST http://localhost:3803/sql
HTTP/1.1 401 Authorization Required
</code></pre>
<h2 id="parameters"><a class="header" href="#parameters">Parameters</a></h2>
<p>SQL parameters are available to:</p>
<ul>
<li><code>application/json</code> and <code>application/ld+json</code> as part of the <code>POST</code> body</li>
<li><code>multipart/form-data</code> as form data</li>
<li><code>application/x-www-form-urlencoded</code> as URL query parameters</li>
<li><code>application/sql</code> as form data and/or URL query parameters</li>
</ul>
<p>Parameters can be JSON literals, JSON-LD scalars, or SQL literals.
A JSON-LD scalar always has the form: <code>{&quot;@type&quot;: &quot;xsd:TYPE&quot;, &quot;@value&quot;: &quot;DATA&quot;}</code>.
JSON-LD types are listed under the <a href="data_types.html">Data Types</a> table.</p>
<h3 id="named-parameters"><a class="header" href="#named-parameters">Named Parameters</a></h3>
<p>Named parameters substitute parameter placeholders with the form <code>:param</code>
by the parameter key with the corresponding name.
Named parameters are represented as a JSON object.</p>
<pre><code class="language-sh">curl -d '{&quot;q&quot;: &quot;INSERT INTO products {name: :name, price: :price};&quot;, &quot;p&quot;: {&quot;name&quot;: &quot;Paprika&quot;, &quot;price&quot;: 2.99}}' -H &quot;Content-Type: application/json&quot; -X POST http://localhost:3803/sql
curl -d '{&quot;q&quot;: &quot;INSERT INTO events {start: :start};&quot;, &quot;p&quot;: {&quot;start&quot;: {&quot;@type&quot;: &quot;xsd:dateTime&quot;, &quot;@value&quot;: &quot;2011-04-09T20:00:00Z&quot;}}}' -H &quot;Content-Type: application/ld+json&quot; -X POST http://localhost:3803/sql
curl -F q=&quot;INSERT INTO products {name: :sauce};&quot; -F p='{&quot;sauce&quot;: &quot;Sriracha&quot;}' -X POST http://localhost:3803/sql
</code></pre>
<h3 id="positional-parameters"><a class="header" href="#positional-parameters">Positional Parameters</a></h3>
<p>Positional parameters substitute parameter placeholders with the form <code>?</code>
by the parameter values, in the order they appear.
Positional parameters are respresented as a JSON array.</p>
<pre><code class="language-sh">curl -d '{&quot;q&quot;: &quot;SELECT * FROM products WHERE name = ? AND price &gt; ?;&quot;, &quot;p&quot;: [&quot;Salt&quot;, 3.99]}' -H &quot;Content-Type: application/json&quot; -X POST http://localhost:3803/sql
curl -d '{&quot;q&quot;: &quot;INSERT INTO events {start: ?};&quot;, &quot;p&quot;: [{&quot;@type&quot;: &quot;xsd:dateTime&quot;, &quot;@value&quot;: &quot;2011-04-09T20:00:00Z&quot;}]}' -H &quot;Content-Type: application/ld+json&quot; -X POST http://localhost:3803/sql
curl -F q=&quot;INSERT INTO products {name: ?};&quot; -F p='[&quot;Sriracha&quot;]' -X POST http://localhost:3803/sql
</code></pre>
<h3 id="bulk-parameters"><a class="header" href="#bulk-parameters">Bulk Parameters</a></h3>
<p>Bulk operations are possible by setting the <code>m</code> flag to <code>true</code>.
Bulk operations are available to both named and positional parameters.
The list of parameters supplied in bulk must be nested in an array.</p>
<pre><code class="language-sh">curl -d '{&quot;q&quot;: &quot;INSERT INTO products {name: :name};&quot;, &quot;p&quot;: [{&quot;name&quot;: &quot;Soda&quot;}, {&quot;name&quot;: &quot;Tonic&quot;}], &quot;m&quot;: true}' -H &quot;Content-Type: application/json&quot; -X POST http://localhost:3803/sql
curl -F q=&quot;INSERT INTO sauces {name: ?, color: ?};&quot; -F p='[[&quot;Mustard&quot;, &quot;Yellow&quot;], [&quot;Ketchup&quot;, &quot;Red&quot;]]' -F m=true -X POST http://localhost:3803/sql
</code></pre>
<h3 id="apache-arrow-file-parameters"><a class="header" href="#apache-arrow-file-parameters">Apache Arrow File Parameters</a></h3>
<p>As it is possible to receive Apache Arrow data from an Endb query,
it is possible to submit Apache Arrow as a statement parameter.
The example below assumes the existence of a a table called <code>names</code>,
which only contains one column (<code>name</code>).
Apache Arrow Streams can also be used as parameters in the same way.</p>
<pre><code class="language-sh"># create a sample Arrow file:
curl -d &quot;SELECT * FROM names;&quot; -H &quot;Content-Type: application/sql&quot; -H &quot;Accept: application/vnd.apache.arrow.file&quot; -X POST http://localhost:3803/sql --output names.arrow
# use the sample Arrow file:
curl -F m=true -F q=&quot;INSERT INTO projects {name: :name};&quot; -F &quot;p=@names.arrow;type=application/vnd.apache.arrow.file&quot; -X POST http://localhost:3803/sql
</code></pre>
<p>NOTE: This feature should be used with caution.
Do not submit arbitrary Arrow files as parameters.
If a malformed Arrow file is submitted, the error message returned
(if any) is unlikely to provide guidance.
Preferably, Arrow files should be created using Endb itself, as in
the example above.
Most users will prefer to use a human-readable file format instead,
such as a JSON variant or static SQL statements.</p>
<h2 id="bulk-insert"><a class="header" href="#bulk-insert">Bulk Insert</a></h2>
<p>Bulk inserts are possible by combining the tools mentioned under <a href="#parameters"><em>Parameters</em></a>.</p>
<p>For example, the <a href="../sql/queries.html#objects-lists"><code>OBJECTS</code></a> keyword can insert an
array of object literals.
Note that each object used as a positional parameter must be wrapped in a JSON array,
since there may be more than one positional parameter supplied.
Similarly, each named parameter must be wrapped in an object containing a key of the
corresponding name.</p>
<pre><code class="language-sql">curl -F m=true -F q=&quot;INSERT INTO products OBJECTS ?&quot; -F p=&quot;[[{name: 'jam'}], [{name: 'butter'}]]&quot; -X POST http://localhost:3803/sql
curl -F m=true -F q=&quot;INSERT INTO products OBJECTS :product&quot; -F p=&quot;[{product: {name: 'jelly'}}, {product: {name: 'ghee'}}]&quot; -X POST http://localhost:3803/sql
</code></pre>
<h2 id="multiple-statements"><a class="header" href="#multiple-statements">Multiple Statements</a></h2>
<p>It is possible to pass multiple SQL statements to Endb by delimiting
them with semicolons.
Parameters will be passed to all statements in order.</p>
<p>Only the result of the last statement is returned to the client.
In the following example, the <code>INSERT</code> will be successful but will not
return a result.
The <code>SELECT</code> will return to the client.</p>
<pre><code class="language-sh">curl --form-string q=&quot;INSERT INTO sauces {name: ?, color: ?}; SELECT {namo: ?, colour: ?};&quot; -F p='[&quot;Mustard&quot;, &quot;Yellow&quot;, &quot;Ketchup&quot;, &quot;Red&quot;]' -X POST http://localhost:3803/sql
</code></pre>
<p>NOTE: <code>--form-string</code> is required instead of <code>--form</code> to send semicolon-delimited
statements with <code>curl</code>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../reference/monitoring.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../reference/websocket_api.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../reference/monitoring.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../reference/websocket_api.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
