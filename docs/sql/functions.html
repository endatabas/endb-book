<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Functions - The Endatabas Book</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Introduction</a></li><li class="chapter-item expanded "><a href="../tutorial/index.html"><strong aria-hidden="true">1.</strong> Tutorial</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tutorial/quickstart.html"><strong aria-hidden="true">1.1.</strong> Quickstart</a></li><li class="chapter-item expanded "><a href="../tutorial/try_it.html"><strong aria-hidden="true">1.2.</strong> Try It!</a></li><li class="chapter-item expanded "><a href="../tutorial/sql_basics.html"><strong aria-hidden="true">1.3.</strong> Endb SQL Basics</a></li></ol></li><li class="chapter-item expanded "><a href="../sql/index.html"><strong aria-hidden="true">2.</strong> SQL Reference</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../sql/intention.html"><strong aria-hidden="true">2.1.</strong> Intention</a></li><li class="chapter-item expanded "><a href="../sql/data_manipulation.html"><strong aria-hidden="true">2.2.</strong> Data Manipulation</a></li><li class="chapter-item expanded "><a href="../sql/queries.html"><strong aria-hidden="true">2.3.</strong> Queries</a></li><li class="chapter-item expanded "><a href="../sql/data_types.html"><strong aria-hidden="true">2.4.</strong> SQL Data Types</a></li><li class="chapter-item expanded "><a href="../sql/operators.html"><strong aria-hidden="true">2.5.</strong> Operators</a></li><li class="chapter-item expanded "><a href="../sql/functions.html" class="active"><strong aria-hidden="true">2.6.</strong> Functions</a></li><li class="chapter-item expanded "><a href="../sql/time_queries.html"><strong aria-hidden="true">2.7.</strong> Time Queries</a></li><li class="chapter-item expanded "><a href="../sql/path_navigation.html"><strong aria-hidden="true">2.8.</strong> Path Navigation</a></li><li class="chapter-item expanded "><a href="../sql/schema.html"><strong aria-hidden="true">2.9.</strong> Schema</a></li><li class="chapter-item expanded "><a href="../sql/views.html"><strong aria-hidden="true">2.10.</strong> Views</a></li><li class="chapter-item expanded "><a href="../sql/assertions.html"><strong aria-hidden="true">2.11.</strong> Assertions</a></li></ol></li><li class="chapter-item expanded "><a href="../reference/index.html"><strong aria-hidden="true">3.</strong> Reference</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../reference/installation.html"><strong aria-hidden="true">3.1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="../reference/operation.html"><strong aria-hidden="true">3.2.</strong> Operation</a></li><li class="chapter-item expanded "><a href="../reference/monitoring.html"><strong aria-hidden="true">3.3.</strong> Monitoring</a></li><li class="chapter-item expanded "><a href="../reference/clients.html"><strong aria-hidden="true">3.4.</strong> Clients</a></li><li class="chapter-item expanded "><a href="../reference/http_api.html"><strong aria-hidden="true">3.5.</strong> HTTP API</a></li><li class="chapter-item expanded "><a href="../reference/websocket_api.html"><strong aria-hidden="true">3.6.</strong> WebSocket API</a></li><li class="chapter-item expanded "><a href="../reference/data_types.html"><strong aria-hidden="true">3.7.</strong> Data Types</a></li></ol></li><li class="chapter-item expanded "><a href="../appendix/index.html"><strong aria-hidden="true">4.</strong> Appendix</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../appendix/what.html"><strong aria-hidden="true">4.1.</strong> What?</a></li><li class="chapter-item expanded "><a href="../appendix/why.html"><strong aria-hidden="true">4.2.</strong> Why?</a></li><li class="chapter-item expanded "><a href="../appendix/architecture.html"><strong aria-hidden="true">4.3.</strong> Architecture</a></li><li class="chapter-item expanded "><a href="../appendix/roadmap.html"><strong aria-hidden="true">4.4.</strong> Roadmap</a></li><li class="chapter-item expanded "><a href="../appendix/license.html"><strong aria-hidden="true">4.5.</strong> License</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Endatabas Book</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/endatabas/endb-book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/endatabas/endb-book/edit/main/src/sql/functions.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="functions"><a class="header" href="#functions">Functions</a></h1>
<h2 id="string-functions"><a class="header" href="#string-functions">String Functions</a></h2>
<h3 id="character_length"><a class="header" href="#character_length">CHARACTER_LENGTH</a></h3>
<p>The <code>CHARACTER_LENGTH</code> function returns the number of unicode characters in a string.</p>
<pre><code class="language-sql">SELECT CHARACTER_LENGTH('jos√©');
-- 4

SELECT CHARACTER_LENGTH('‚ù§Ô∏èü•´');
-- 3
</code></pre>
<h3 id="octet_length"><a class="header" href="#octet_length">OCTET_LENGTH</a></h3>
<p>The <code>OCTET_LENGTH</code> function returns the length of a string, in bytes (octets).</p>
<pre><code class="language-sql">SELECT OCTET_LENGTH('jos√©');
-- 5

SELECT OCTET_LENGTH('‚ù§Ô∏èü•´');
-- 10
</code></pre>
<h3 id="trim-ltrim-rtrim"><a class="header" href="#trim-ltrim-rtrim">TRIM, LTRIM, RTRIM</a></h3>
<p>The <code>TRIM</code>, <code>LTRIM</code>, and <code>RTRIM</code> functions trim surrounding whitespace,
whitespace to the left, and whitespace to the right of a string, respectively.</p>
<pre><code class="language-sql">SELECT TRIM('  hello  ');
-- 'hello'

SELECT LTRIM('  hello  ');
-- 'hello  '

SELECT RTRIM('  hello  ');
-- '  hello'
</code></pre>
<h3 id="lower-upper"><a class="header" href="#lower-upper">LOWER, UPPER</a></h3>
<p>The <code>LOWER</code> and <code>UPPER</code> functions downcase and upcase a string, respectively.</p>
<pre><code class="language-sql">SELECT LOWER('Relatable Algebra');
-- 'relatable algebra'

SELECT UPPER('Shouting Calculus');
-- 'SHOUTING CALCULUS'
</code></pre>
<h3 id="replace"><a class="header" href="#replace">REPLACE</a></h3>
<p>The <code>REPLACE</code> function returns the string in the first parameter,
with the second parameter (if found) replaced by the third.</p>
<pre><code class="language-sql">SELECT REPLACE('Relatable Algebra', 'Rela', 'Infla');
</code></pre>
<h3 id="instr"><a class="header" href="#instr">INSTR</a></h3>
<p>The <code>INSTR</code> function returns the first character of a substring match on the second parameter,
if found, and <code>0</code> if it is not found.</p>
<pre><code class="language-sql">SELECT INSTR('Coffee', 'ee');
</code></pre>
<h3 id="substring"><a class="header" href="#substring">SUBSTRING</a></h3>
<p>The <code>SUBSTRING</code> function returns the substring starting from the index provided as the second parameter.
If the (optional) third parameter is provided, the substring will be of that length (or less, if the end of the source string is reached).
<code>SUBSTR</code> is a synonym for <code>SUBSTRING</code>.</p>
<pre><code class="language-sql">SELECT SUBSTRING('Hello Edgar', 4);
SELECT SUBSTR('Hello Edgar', 4, 2);
</code></pre>
<h3 id="position"><a class="header" href="#position">POSITION</a></h3>
<p>The <code>POSITION</code> pseudo-function returns the first position of the first character of the first matched substring
in another string.
If the substring is not detected, <code>POSITION</code> returns <code>0</code>.</p>
<pre><code class="language-sql">SELECT POSITION(&quot;h&quot; IN &quot;Hawaii&quot;);
SELECT POSITION(&quot;i&quot; IN &quot;Hawaii&quot;);
SELECT POSITION(&quot;Ha&quot; IN &quot;Hawaii&quot;);
</code></pre>
<p>NOTE: <code>POSITION</code> is a &quot;pseudo-function&quot; because internally it uses custom syntax of the form
<code>&lt;substring&gt; IN &lt;string&gt;</code>.</p>
<h3 id="unicode"><a class="header" href="#unicode">UNICODE</a></h3>
<p>The <code>UNICODE</code> function returns an integer unicode value for the first character
of the parameter given.</p>
<pre><code class="language-sql">SELECT UNICODE('Adam');
</code></pre>
<h3 id="char"><a class="header" href="#char">CHAR</a></h3>
<p>The <code>CHAR</code> function returns a string corresponding to the supplied integer
character codes.</p>
<pre><code class="language-sql">SELECT CHAR(65, 66, 67);
</code></pre>
<h3 id="concat"><a class="header" href="#concat">CONCAT</a></h3>
<p><code>CONCAT</code> is equivalent to the <a href="operators.html#concatenation">Concatenation Operator (||)</a>
except that <code>CONCAT</code> is limited to 2-arity applications and <code>||</code> can be chained.</p>
<h3 id="like"><a class="header" href="#like">LIKE</a></h3>
<p>The <code>LIKE</code> function serves the same purpose as the
<a href="operators.html#like"><code>LIKE</code> operator</a>.
However, the argument order is (effectively) reversed for the <code>LIKE</code> function,
to match the signature used in SQLite.
For the function version, the pattern is the first argument.
Optionally, an alternative escape character can be provided as a third argument.</p>
<pre><code class="language-sql">SELECT * FROM users WHERE LIKE('Stev%', name);
SELECT * FROM users WHERE LIKE('EdgarX%', name, 'X');
</code></pre>
<h2 id="collection-functions"><a class="header" href="#collection-functions">Collection Functions</a></h2>
<h3 id="length"><a class="header" href="#length">LENGTH</a></h3>
<p>The <code>LENGTH</code> function counts the number of entries in a collection.
When supplied with a string, it is a synonym for <code>CHARACTER_LENGTH</code>.</p>
<pre><code class="language-sql">SELECT LENGTH([3, 2]);
SELECT LENGTH({name: 'Peas', price: 8.99, product_no: 77});
SELECT LENGTH('jos√©');
</code></pre>
<p>NOTE: <code>CARDINALITY</code> is an synonym for <code>LENGTH</code>.</p>
<h3 id="unnest"><a class="header" href="#unnest">UNNEST</a></h3>
<p>The <code>UNNEST</code> function can be thought of as the inverse of
<a href="functions.html#array_agg"><code>ARRAY_AGG</code></a>,
although it offers more power than just unlinking elements.
It takes an array or object and pulls its elements into separate rows.</p>
<pre><code class="language-sql">SELECT * FROM UNNEST([1.99, 2.99, 3.99]) AS products(price);
</code></pre>
<p>It is possible to unnest multiple arrays.
If the arrays do not have the same number of elements, the shorter array(s) will
have those values filled with <code>NULL</code>:</p>
<pre><code class="language-sql">SELECT names.* FROM (VALUES (['Leslie', 'Edgar', 'fiver2'], ['Lamport', 'Codd'])) AS x(first, last), UNNEST(x.first, x.last) AS names(first, last);
</code></pre>
<p>When unnesting an object, keys-value pairs will be returned
as per <a href="functions.html#object_entries">object_entries</a>.
This behaviour is useful for manipulating collections:</p>
<pre><code class="language-sql">SELECT * FROM UNNEST({original_price: 1.99, sale_price: 1.50, coupon_price: 1.40}) AS prices(price);
-- [{'price': ['sale_price', 1.5]},
--  {'price': ['coupon_price', 1.4]},
--  {'price': ['original_price', 1.99]}]
</code></pre>
<h4 id="with-ordinality"><a class="header" href="#with-ordinality">WITH ORDINALITY</a></h4>
<p><code>UNNEST</code> can be suffixed with <code>WITH ORDINALITY</code>
to append an ordinal column to the results.</p>
<pre><code class="language-sql">SELECT * FROM UNNEST([1.99, 2.99, 3.99]) WITH ORDINALITY AS products(price, n);
-- [{'n': 0, 'price': 1.99}, {'n': 1, 'price': 2.99}, {'n': 2, 'price': 3.99}]
</code></pre>
<p>NOTE: Endb ordinals are zero-indexed.</p>
<h3 id="object_keys"><a class="header" href="#object_keys">OBJECT_KEYS</a></h3>
<p>An object's keys can be selected using <code>OBJECT_KEYS</code>.</p>
<pre><code class="language-sql">SELECT OBJECT_KEYS({original_price: 1.99, sale_price: 1.50, coupon_price: 1.40});
</code></pre>
<h3 id="object_values"><a class="header" href="#object_values">OBJECT_VALUES</a></h3>
<p>An object's values can be selected using <code>OBJECT_VALUES</code>.</p>
<pre><code class="language-sql">SELECT OBJECT_VALUES({original_price: 1.99, sale_price: 1.50, coupon_price: 1.40});
</code></pre>
<h3 id="object_entries"><a class="header" href="#object_entries">OBJECT_ENTRIES</a></h3>
<p>Returns an array of key-value pairs representing the given object.</p>
<pre><code class="language-sql">SELECT OBJECT_ENTRIES({a: 1, b: 2, c: 3});
-- [['a': 1], ['b': 2], ['c': 3]]
</code></pre>
<h3 id="object_from_entries"><a class="header" href="#object_from_entries">OBJECT_FROM_ENTRIES</a></h3>
<p>Constructs an object from an array of key-value pairs.</p>
<pre><code class="language-sql">SELECT OBJECT_FROM_ENTRIES([['a', 1], ['b', 2], ['c', 3]]);
-- {a: 1, b: 2, c: 3}
</code></pre>
<h3 id="patch"><a class="header" href="#patch">PATCH</a></h3>
<p>The <code>PATCH</code> function takes two documents.
The document returned is the first document &quot;patched&quot; with any fields found in the second document.
If the second document does not specify a field, that field is left untouched.
If the second document specifies any fields with values of <code>NULL</code>, those fields are removed.</p>
<pre><code class="language-sql">SELECT PATCH(
  {name: 'Salt', nutrition: {sodium: 100, ingredients: 'Kosher Salt'}},
  {name: 'Sea Salt', nutrition: {ingredients: NULL}}
);
</code></pre>
<p>The <code>PATCH</code> function has an equivalent operator for data manipulation:
<a href="data_manipulation.html#update-patch"><code>UPDATE PATCH</code></a></p>
<h2 id="numeric-functions"><a class="header" href="#numeric-functions">Numeric Functions</a></h2>
<h3 id="random"><a class="header" href="#random">RANDOM</a></h3>
<p>The <code>RANDOM</code> function returns a random integer.</p>
<pre><code class="language-sql">SELECT RANDOM();
</code></pre>
<h3 id="generate_series"><a class="header" href="#generate_series">GENERATE_SERIES</a></h3>
<p>The <code>GENERATE_SERIES</code> function generates an array of numbers within a given interval.
The first and second parameters are the start and end of the interval.
The optional third parameter is a step value by which to increment each number.
The result is returned as a single anonymous column (with the default name, <code>column1</code>)
containing the array.</p>
<pre><code class="language-sql">SELECT GENERATE_SERIES(0, 21);
SELECT GENERATE_SERIES(0, 21, 3);
</code></pre>
<p>It is possible to use the result of <code>GENERATE_SERIES</code> in other SQL expressions, like <code>IN</code>:</p>
<pre><code class="language-sql">SELECT * FROM products WHERE product_no IN (SELECT column1 FROM generate_series(1000, 20000) AS foo);
</code></pre>
<h3 id="math"><a class="header" href="#math">Math</a></h3>
<p>Endb provides standard SQL math functions based on SQLite's collection of math functions:</p>
<ul>
<li>ROUND</li>
<li>SIN</li>
<li>COS</li>
<li>TAN</li>
<li>SINH</li>
<li>COSH</li>
<li>TANH</li>
<li>ASIN</li>
<li>ACOS</li>
<li>ATAN</li>
<li>ASINH</li>
<li>ACOSH</li>
<li>ATANH</li>
<li>ATAN2</li>
<li>FLOOR</li>
<li>CEILING, CEIL</li>
<li>SIGN</li>
<li>SQRT</li>
<li>EXP</li>
<li>POWER, POW</li>
<li>LOG, LOG10</li>
<li>LOG2</li>
<li>LN</li>
<li>DEGREES</li>
<li>RADIANS</li>
<li>PI</li>
<li>ABS</li>
</ul>
<p>NOTE: Endb follows the choice of most SQL databases and aliases <code>LOG</code> to <code>LOG10</code>
rather than <code>LN</code> (natural log), as specified by the SQL standard.</p>
<p>NOTE: Mathematical operators are documented under <a href="operators.html#math">Operators</a>.</p>
<h2 id="datetime-functions"><a class="header" href="#datetime-functions">Date/Time Functions</a></h2>
<h3 id="strftime"><a class="header" href="#strftime">STRFTIME</a></h3>
<p>The <code>STRFTIME</code> function formats a date or time value as a string.</p>
<pre><code class="language-sql">SELECT strftime('%Y/%m/%d', date('2001-01-01'));
SELECT strftime('%Y %m %d at %H %M %S', datetime('2001-01-01 03:04:05'));
</code></pre>
<h3 id="unixepoch"><a class="header" href="#unixepoch">UNIXEPOCH</a></h3>
<p>The <code>UNIXEPOCH</code> function returns the number of seconds since the UNIX epoch.
Accepts a <code>DATE</code>, <code>TIMESTAMP</code>, or <code>STRING</code>.</p>
<pre><code class="language-sql">SELECT UNIXEPOCH('2023-01-01');
SELECT UNIXEPOCH(1970-01-01T00:00:00Z);
</code></pre>
<h3 id="julianday"><a class="header" href="#julianday">JULIANDAY</a></h3>
<p>The <code>JULIANDAY</code> function returns the Julian Day, which is the number of days since
noon in UTC on November 24, 4714 B.C.
Accepts a <code>DATE</code>, <code>TIMESTAMP</code>, or <code>STRING</code>.</p>
<pre><code class="language-sql">SELECT JULIANDAY(1970-01-01);
</code></pre>
<h3 id="extract"><a class="header" href="#extract">EXTRACT</a></h3>
<p>The <code>EXTRACT</code> pseudo-function provides a way to access one named, numerical portion of a
date, time, or timestamp.
Portions of dates can only be extracted from dates or timestamps.
Portions of times can only be extracted from timestamps or times.</p>
<pre><code class="language-sql">SELECT EXTRACT(YEAR FROM CURRENT_DATE);
SELECT EXTRACT(MONTH FROM CURRENT_DATE);
SELECT EXTRACT(DAY FROM CURRENT_TIMESTAMP);
SELECT EXTRACT(HOUR FROM CURRENT_TIMESTAMP);
SELECT EXTRACT(MINUTE FROM CURRENT_TIME);
SELECT EXTRACT(SECOND FROM CURRENT_TIME);
</code></pre>
<p>NOTE: <code>EXTRACT</code> is a &quot;pseudo-function&quot; because internally it uses custom syntax of the form
<code>&lt;named-portion&gt; FROM &lt;date&gt;</code>.</p>
<h2 id="aggregate-functions"><a class="header" href="#aggregate-functions">Aggregate Functions</a></h2>
<h3 id="min-max"><a class="header" href="#min-max">MIN, MAX</a></h3>
<p>The <code>MIN</code> and <code>MAX</code> functions return the minimum and maximum values for an expression,
respectively.</p>
<pre><code class="language-sql">SELECT MIN(price) FROM products;
SELECT MAX(price) FROM products;
</code></pre>
<p>NOTE: <code>MIN</code> and <code>MAX</code> also have non-aggregate equivalents, which are 2-arity.
When used that way, they each return the minimum or maximum value of the two values provided.</p>
<h3 id="sum"><a class="header" href="#sum">SUM</a></h3>
<p>The <code>SUM</code> function returns the sum of all non-null values under the column given as a parameter.</p>
<pre><code class="language-sql">SELECT SUM(price) FROM products;
</code></pre>
<p>If all values for the given column are <code>NULL</code>, <code>SUM</code> returns <code>NULL</code>.</p>
<h3 id="total"><a class="header" href="#total">TOTAL</a></h3>
<p>The <code>TOTAL</code> function is equivalent to <code>SUM</code> except that it returns <code>0.0</code> in the case where
all input values are <code>NULL</code>.</p>
<h3 id="avg"><a class="header" href="#avg">AVG</a></h3>
<p>The <code>AVG</code> function takes a numerical-type-agnostic average of all values under the
column given as a parameter.</p>
<pre><code class="language-sql">SELECT AVG(price) FROM products;
</code></pre>
<h3 id="count"><a class="header" href="#count">COUNT</a></h3>
<p>The <code>COUNT</code> function returns the count of <em>non-null</em>, <em>non-empty</em> values for the specified column.</p>
<pre><code>SELECT COUNT(price) FROM sales;
</code></pre>
<p>NOTE: Because null/empty values are ignored, the behaviour of <code>COUNT</code> will differ from other
SQL dialects. Whether or not <code>COUNT(price)</code> and <code>COUNT(1)</code> are equivalent is dependent on
whether the <code>price</code> attribute exists with a non-null value on each document.</p>
<h3 id="array_agg"><a class="header" href="#array_agg">ARRAY_AGG</a></h3>
<p>The <code>ARRAY_AGG</code> function concatenates the results of an expression into an array.
The parameter may be <a href="queries.html#order-by-sorting-results">ordered</a>
within <code>ARRAY_AGG</code>.</p>
<pre><code class="language-sql">SELECT ARRAY_AGG(price) FROM products;
SELECT ARRAY_AGG(name ORDER BY price DESC) FROM products;
</code></pre>
<p>Note that when operating on arrays, the arrays themselves will be concatenated,
not the contents of the arrays.
The result will be an array of one higher dimension:</p>
<pre><code class="language-sql">SELECT ARRAY_AGG(x.column1) FROM (VALUES ([1,2]), ([3,4])) AS x;
-- [{'column1': [[1, 2], [3, 4]]}]
</code></pre>
<h3 id="group_concat"><a class="header" href="#group_concat">GROUP_CONCAT</a></h3>
<p>The <code>GROUP_CONCAT</code> function returns a string with concatenated
non-null values from a column or group.
Given a second parameter,
It defaults to a comma-delimited list, but the second (optional) parameter
can override the delimiter.</p>
<pre><code class="language-sql">SELECT GROUP_CONCAT(name) FROM products;
SELECT GROUP_CONCAT(name, ':') FROM products;
</code></pre>
<h3 id="filter"><a class="header" href="#filter">FILTER</a></h3>
<p>All aggregate functions can have a filter applied before aggregation.</p>
<pre><code class="language-sql">SELECT SUM(price) FILTER(WHERE price &gt; 20) FROM products;
</code></pre>
<h2 id="data-type-functions"><a class="header" href="#data-type-functions">Data Type Functions</a></h2>
<h3 id="cast"><a class="header" href="#cast">CAST</a></h3>
<p>The <code>CAST</code> function forces a value into a particular data type.
Note that not all types are cast-compatible with each other.</p>
<pre><code class="language-sql">SELECT CAST(price AS INTEGER) FROM products;
</code></pre>
<h3 id="typeof"><a class="header" href="#typeof">TYPEOF</a></h3>
<p>The <code>TYPEOF</code> function returns the type of the provided value.</p>
<pre><code class="language-sql">SELECT TYPEOF('hi2u');
SELECT TYPEOF(1.12345678901234);
SELECT TYPEOF(2018-01-01T00:00:00);
</code></pre>
<h2 id="conditional-functions"><a class="header" href="#conditional-functions">Conditional Functions</a></h2>
<h3 id="iif"><a class="header" href="#iif">IIF</a></h3>
<p>The <code>IIF</code> function is a conditional shorthand.
It returns the second parameter if the condition is true and the third parameter if the condition is false.</p>
<pre><code class="language-sql">SELECT IIF(price &gt; 5.99, 'Expensive!', 'Cheap') FROM products;
</code></pre>
<h3 id="nullif"><a class="header" href="#nullif">NULLIF</a></h3>
<p>The <code>NULLIF</code> function returns <code>TRUE</code> if the two supplied expressions are equal.</p>
<pre><code class="language-sql">SELECT NULLIF(1, 1);
SELECT NULLIF(1, 'zig');
</code></pre>
<h3 id="coalesce"><a class="header" href="#coalesce">COALESCE</a></h3>
<p>The <code>COALESCE</code> function returns its first non-null argument.
The following example returns <code>'zig'</code>:</p>
<pre><code class="language-sql">SELECT COALESCE(NULL, NULL, 'zig', 'zag');
</code></pre>
<h2 id="encoding-functions"><a class="header" href="#encoding-functions">Encoding Functions</a></h2>
<h3 id="base64"><a class="header" href="#base64">BASE64</a></h3>
<p>The <code>BASE64</code> function takes a hexadecimal-encoded BLOB and returns a base64-encoded string, or vice-versa.
<code>BASE64</code> roundtrips its own data.
There is therefore no <code>BLOBFROMBASE64</code> function.</p>
<pre><code class="language-sql">SELECT BASE64(x'010203');
SELECT BASE64('AQID');
</code></pre>
<h3 id="uuid"><a class="header" href="#uuid">UUID</a></h3>
<p>The <code>UUID</code> function returns a universally-unique identifier, as a string.
The <code>UUID_BLOB</code> function takes a string UUID and returns a BLOB.
The <code>UUID_STR</code> function takes a BLOB UUID and returns a string.
When given a parameter of their return type, <code>UUID_BLOB</code> and <code>UUID_STR</code> will format the UUID provided.</p>
<pre><code class="language-sql">SELECT UUID();
SELECT UUID_BLOB('d2ce21c9-d268-409a-b1e0-49e1200bfa47');
SELECT UUID_STR(x'd2ce21c9d268409ab1e049e1200bfa47');

-- formatting:
SELECT UUID_BLOB(x'd2ce21c9d268409ab1e049e1200bfa47');
SELECT UUID_STR('d2ce21c9d268409ab1e049e1200bfa47');
</code></pre>
<h3 id="sha1"><a class="header" href="#sha1">SHA1</a></h3>
<p>The <code>SHA1</code> function takes either a hexadecimal-encoded BLOB, a string, or a number.
It returns the SHA-1 encoding of that value.</p>
<pre><code class="language-sql">SELECT SHA1('2');
</code></pre>
<h3 id="randomblob-zeroblob"><a class="header" href="#randomblob-zeroblob">RANDOMBLOB, ZEROBLOB</a></h3>
<p>The <code>RANDOMBLOB</code> function returns a random binary large object of the size given, in bytes.
The <code>ZEROBLOB</code> function returns a zeroed-out binary large object of the size given, in bytes.</p>
<pre><code class="language-sql">SELECT RANDOMBLOB(32);
SELECT ZEROBLOB(32);
</code></pre>
<h3 id="hex-unhex"><a class="header" href="#hex-unhex">HEX, UNHEX</a></h3>
<p>The <code>HEX</code> function takes a BLOB (or coerces its argument into a UTF-8 string,
which in turn is interpreted as a BLOB)
and turns the BLOB into an upper-case hexadecimal string.</p>
<p>The <code>UNHEX</code> function takes a hexadecimal string and turns it into a BLOB.
The hexadecimal string provided must contain <em>character pairs</em>.
<code>UNHEX</code> takes an optional second parameter: a string containing non-hexadecimal
characters to be ignored in the first parameter.
If non-hexadecimal characters are found in the first parameter but not ignored
in the second parameter, <code>UNHEX</code> returns <code>NULL</code>.</p>
<pre><code class="language-sql">SELECT HEX(15);
-- '3135'

SELECT UNHEX('3135');
-- b'15'

SELECT UNHEX('3135ZZ', 'Z');
-- b'15'

SELECT UNHEX('3135ZZ', 'M');
-- NULL
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../sql/operators.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../sql/time_queries.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../sql/operators.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../sql/time_queries.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
